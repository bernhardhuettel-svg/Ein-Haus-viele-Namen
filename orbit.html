<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <title>Grundstück & Haus – Safari-kompatibel</title>
    <style>
        body { margin: 0; overflow: hidden; }
        canvas { display: block; }
    </style>
</head>
<body>

<script type="module">
import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.158/build/three.module.js';

/* =========================
   SZENE
========================= */
const scene = new THREE.Scene();
scene.background = new THREE.Color(0xaec6cf);

/* =========================
   KAMERA
========================= */
const camera = new THREE.PerspectiveCamera(
    60,
    window.innerWidth / window.innerHeight,
    0.1,
    1000
);
camera.position.set(15, 10, 15);
camera.lookAt(0, 2, 0);

/* =========================
   RENDERER
========================= */
const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

/* =========================
   LICHT
========================= */
scene.add(new THREE.AmbientLight(0xffffff, 0.6));

const dirLight = new THREE.DirectionalLight(0xffffff, 0.6);
dirLight.position.set(20, 30, 10);
scene.add(dirLight);

/* =========================
   BODEN
========================= */
const ground = new THREE.Mesh(
    new THREE.PlaneGeometry(40, 40),
    new THREE.MeshStandardMaterial({ color: 0x2e8b57 })
);
ground.rotation.x = -Math.PI / 2;
scene.add(ground);

/* =========================
   HAUS
========================= */
const houseGroup = new THREE.Group();

const house = new THREE.Mesh(
    new THREE.BoxGeometry(8, 5, 6),
    new THREE.MeshStandardMaterial({ color: 0xb0b0b0 })
);
house.position.y = 2.5;
houseGroup.add(house);

// Tür
const door = new THREE.Mesh(
    new THREE.BoxGeometry(1.2, 2.2, 0.2),
    new THREE.MeshStandardMaterial({ color: 0x654321 })
);
door.position.set(0, 1.1, 3.1);
houseGroup.add(door);

// Fenster
const windowMat = new THREE.MeshStandardMaterial({ color: 0x87cefa });
const windowGeo = new THREE.BoxGeometry(1.2, 1.2, 0.2);

const w1 = new THREE.Mesh(windowGeo, windowMat);
w1.position.set(-2.5, 2.8, 3.1);
houseGroup.add(w1);

const w2 = w1.clone();
w2.position.x = 2.5;
houseGroup.add(w2);

scene.add(houseGroup);

/* =========================
   ANIMATION – KAMERA AUTO-ROTATION
========================= */
let angle = 0;

function animate() {
    requestAnimationFrame(animate);

    // Kamera rotiert automatisch um das Haus
    angle += 0.005; // Geschwindigkeit der Rotation
    camera.position.x = 15 * Math.cos(angle);
    camera.position.z = 15 * Math.sin(angle);
    camera.position.y = 10; // Höhe bleibt konstant
    camera.lookAt(0, 2, 0); // Blickpunkt auf Haus

    renderer.render(scene, camera);
}
animate();

/* =========================
   RESIZE HANDLER
========================= */
window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>

</body>
</html>
