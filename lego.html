<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>3D Architektur – stabiler Stand</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    body {
        margin: 0;
        font-family: system-ui, sans-serif;
        background: #f0f0f0;
        text-align: center;
    }

    header {
        padding: 20px;
        background: #ffffff;
        border-bottom: 1px solid #ccc;
    }

    #container {
        width: 100%;
        height: 600px;
        background: #dddddd;
        margin: 20px auto;
    }

    button {
        padding: 14px 28px;
        font-size: 16px;
        background: #28a745;
        color: #fff;
        border: none;
        border-radius: 6px;
        cursor: pointer;
    }
</style>
</head>

<body>

<header>
    <h1>Architekturmodell – Fenster & Tür</h1>
    <p>Schräge Draufsicht, saubere Volumen</p>
</header>

<div id="container"></div>
<button onclick="init3D()">Szene laden</button>

<script type="module">
import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.158/build/three.module.js';

function init3D() {

    const container = document.getElementById("container");
    container.innerHTML = "";

    /* Szene */
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0xcceeff);

    /* Kamera */
    const camera = new THREE.PerspectiveCamera(
        55,
        container.clientWidth / container.clientHeight,
        0.1,
        1000
    );
    // Startposition wird jetzt passend zur Szene gesetzt
    camera.position.set(200, 120, 200);
    camera.lookAt(0, 10, 0);

    /* Renderer */
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(container.clientWidth, container.clientHeight);
    renderer.setPixelRatio(window.devicePixelRatio);
    container.appendChild(renderer.domElement);

    /* Licht */
    scene.add(new THREE.AmbientLight(0xffffff, 0.8));
    const sun = new THREE.DirectionalLight(0xffffff, 1.2);
    sun.position.set(100, 200, 100);
    scene.add(sun);

    /* Materialien */
    const stoneMat = new THREE.MeshStandardMaterial({ color: 0xaaaaaa });
    const woodMat  = new THREE.MeshStandardMaterial({ color: 0xc19a6b });
    const glassMat = new THREE.MeshStandardMaterial({ color: 0x88ccff, transparent: true, opacity: 0.45 });
    const doorMat  = new THREE.MeshStandardMaterial({ color: 0x333333 });
    const roofMat  = new THREE.MeshStandardMaterial({ color: 0x4f7c4f });

    /* Boden */
    const ground = new THREE.Mesh(
        new THREE.PlaneGeometry(300, 300),
        new THREE.MeshStandardMaterial({ color: 0x88aa66 })
    );
    ground.rotation.x = -Math.PI / 2;
    scene.add(ground);

    /* Sockel */
    const base = new THREE.Mesh(
        new THREE.BoxGeometry(90, 6, 60),
        stoneMat
    );
    base.position.y = 3;
    scene.add(base);

    /* Hauptgebäude */
    const house = new THREE.Mesh(
        new THREE.BoxGeometry(36, 13, 24),
        woodMat
    );
    house.position.set(0, 12.5, 0); // Haus zentriert auf 0,0
    scene.add(house);

    /* Dach */
    const roof = new THREE.Mesh(
        new THREE.BoxGeometry(38, 1.2, 26),
        roofMat
    );
    roof.position.set(0, 20.6, 0);
    scene.add(roof);

    /* Große Fensterfront */
    const bigWindow = new THREE.Mesh(
        new THREE.BoxGeometry(28, 8, 0.4),
        glassMat
    );
    bigWindow.position.set(0, 11.5, 12.3);
    scene.add(bigWindow);

    /* Seitliche Fenster */
    function addWindow(x, y, z) {
        const w = new THREE.Mesh(
            new THREE.BoxGeometry(4, 4, 0.4),
            glassMat
        );
        w.position.set(x, y, z);
        scene.add(w);
    }

    addWindow(-20, 11, 0);
    addWindow(-20, 16, 0);
    addWindow(20, 11, 0);
    addWindow(20, 16, 0);

    /* Eingangstür */
    const door = new THREE.Mesh(
        new THREE.BoxGeometry(3.5, 7, 0.4),
        doorMat
    );
    door.position.set(0, 9.5, 12.4);
    scene.add(door);

    /* Türrahmen */
    const doorFrame = new THREE.Mesh(
        new THREE.BoxGeometry(4.2, 7.6, 0.2),
        stoneMat
    );
    doorFrame.position.set(0, 9.5, 12.2);
    scene.add(doorFrame);

    /* =========================
       ANIMATION – KAMERA AUTO-ROTATION
    ========================= */
    let angle = 0;
    const radius = 120; // Kamera weiter entfernt, damit alles sichtbar ist

    function animate() {
        requestAnimationFrame(animate);

        // Kamera rotiert automatisch um Haus (0,12,0)
        angle += 0.003;
        camera.position.x = 0 + radius * Math.cos(angle);
        camera.position.z = 0 + radius * Math.sin(angle);
        camera.position.y = 80; // Höhe
        camera.lookAt(0, 12, 0);

        renderer.render(scene, camera);
    }
    animate();

    /* Resize */
    window.addEventListener("resize", () => {
        camera.aspect = container.clientWidth / container.clientHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(container.clientWidth, container.clientHeight);
    });
}
</script>

</body>
</html>
