<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>3D Bungalow mit Details</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    body { margin: 0; background: #f0f0f0; font-family: system-ui, sans-serif; text-align: center; }
    header { padding: 20px; background: #fff; border-bottom: 1px solid #ccc; }
    #container { width: 100%; height: 600px; margin: 20px auto; background: #dddddd; }
</style>
</head>
<body>

<header>
    <h1>3D Bungalow – Realistische Details</h1>
    <p>Ziegelstruktur, Garten, Terrasse, automatische Kamera</p>
</header>

<div id="container"></div>

<script type="module">
import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.158/build/three.module.js';

function init3D() {
    const container = document.getElementById("container");
    container.innerHTML = "";

    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0xcceeff);

    // Kamera
    const camera = new THREE.PerspectiveCamera(60, container.clientWidth / container.clientHeight, 0.1, 1000);
    camera.position.set(25, 15, 25);

    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(container.clientWidth, container.clientHeight);
    renderer.setPixelRatio(window.devicePixelRatio);
    container.appendChild(renderer.domElement);

    // Licht
    scene.add(new THREE.AmbientLight(0xffffff, 0.6));
    const sun = new THREE.DirectionalLight(0xffffff, 1);
    sun.position.set(50, 100, 50);
    scene.add(sun);

    // Materialien
    const groundMat = new THREE.MeshStandardMaterial({ color: 0x88aa66 });
    const wallMat = new THREE.MeshStandardMaterial({ color: 0xc19a6b });
    const roofMat = new THREE.MeshStandardMaterial({ color: 0x4f7c4f });
    const windowMat = new THREE.MeshStandardMaterial({ color: 0x88ccff, transparent: true, opacity: 0.5 });
    const doorMat = new THREE.MeshStandardMaterial({ color: 0x333333 });
    const terraceMat = new THREE.MeshStandardMaterial({ color: 0xd2b48c });
    const pathMat = new THREE.MeshStandardMaterial({ color: 0x999999 });

    // Grundstück
    const ground = new THREE.Mesh(new THREE.PlaneGeometry(20, 40), groundMat);
    ground.rotation.x = -Math.PI/2;
    scene.add(ground);

    // Hilfsfunktion: Wand aus Blöcken
    function createWall(xStart, yStart, zStart, width, height, depth, material, blockSize=0.5) {
        const group = new THREE.Group();
        for(let i=0; i<width; i+=blockSize){
            for(let j=0; j<height; j+=blockSize){
                for(let k=0; k<depth; k+=blockSize){
                    const cube = new THREE.Mesh(new THREE.BoxGeometry(blockSize, blockSize, blockSize), material);
                    cube.position.set(xStart + i + blockSize/2, yStart + j + blockSize/2, zStart + k + blockSize/2);
                    group.add(cube);
                }
            }
        }
        return group;
    }

    // Hausmaße
    const houseWidth = 12;
    const houseDepth = 12;
    const houseHeight = 3;

    // Wände (Blockstruktur)
    const frontWall = createWall(-houseWidth/2,0,houseDepth/2-0.1, houseWidth, houseHeight, 0.2, wallMat);
    const backWall  = createWall(-houseWidth/2,0,-houseDepth/2, houseWidth, houseHeight, 0.2, wallMat);
    const leftWall  = createWall(-houseWidth/2,0,-houseDepth/2, 0.2, houseHeight, houseDepth, wallMat);
    const rightWall = createWall(houseWidth/2-0.2,0,-houseDepth/2, 0.2, houseHeight, houseDepth, wallMat);

    scene.add(frontWall, backWall, leftWall, rightWall);

    // Fenster an der Front
    function addWindow(x, y, z) {
        const win = new THREE.Mesh(new THREE.BoxGeometry(2,2,0.2), windowMat);
        win.position.set(x, y, z);
        scene.add(win);
    }
    addWindow(-3,1.5,houseDepth/2 + 0.1);
    addWindow(3,1.5,houseDepth/2 + 0.1);

    // Tür
    const door = new THREE.Mesh(new THREE.BoxGeometry(2,2.5,0.2), doorMat);
    door.position.set(0,1.25,houseDepth/2 + 0.1);
    scene.add(door);

    // Flachdach
    const roof = new THREE.Mesh(new THREE.BoxGeometry(houseWidth+0.5,0.5,houseDepth+0.5), roofMat);
    roof.position.set(0,houseHeight+0.25,0);
    scene.add(roof);

    // Terrasse vorne
    const terrace = new THREE.Mesh(new THREE.BoxGeometry(6,0.1,2), terraceMat);
    terrace.position.set(0,0.05,houseDepth/2 + 1);
    scene.add(terrace);

    // Weg zum Eingang
    const path = new THREE.Mesh(new THREE.BoxGeometry(2,0.05,5), pathMat);
    path.position.set(0,0.025,houseDepth/2 + 3.5);
    scene.add(path);

    // Kleine Bäume/Garten (ein paar Kugeln)
    function addTree(x, z) {
        const trunk = new THREE.Mesh(new THREE.CylinderGeometry(0.2,0.2,1), wallMat);
        trunk.position.set(x,0.5,z);
        scene.add(trunk);
        const leaves = new THREE.Mesh(new THREE.SphereGeometry(0.8,8,8), new THREE.MeshStandardMaterial({color:0x228822}));
        leaves.position.set(x,1.5,z);
        scene.add(leaves);
    }
    addTree(-6, -5);
    addTree(6, -5);
    addTree(-5, 6);

    // Kamera-Auto-Rotation
    let angle = 0;
    const radius = 25;
    function animate() {
        requestAnimationFrame(animate);
        angle += 0.002;
        camera.position.x = radius * Math.cos(angle);
        camera.position.z = radius * Math.sin(angle);
        camera.position.y = 15;
        camera.lookAt(0,1.5,0);
        renderer.render(scene, camera);
    }
    animate();

    // Resize
    window.addEventListener("resize", ()=>{
        camera.aspect = container.clientWidth/container.clientHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(container.clientWidth, container.clientHeight);
    });
}

init3D();
</script>

</body>
</html>
