<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>3D Bungalow – Realistisch</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { margin:0; background:#eef2f3; font-family:system-ui; }
#container { width:100vw; height:100vh; }
</style>
</head>
<body>

<div id="container"></div>

<script type="module">
import * as THREE from "https://cdn.jsdelivr.net/npm/three@0.158/build/three.module.js";

const container = document.getElementById("container");
const scene = new THREE.Scene();
scene.background = new THREE.Color(0xcce6ff);

/* Kamera */
const camera = new THREE.PerspectiveCamera(60, innerWidth/innerHeight, 0.1, 500);
camera.position.set(30, 18, 30);

/* Renderer */
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth, innerHeight);
renderer.setPixelRatio(devicePixelRatio);
container.appendChild(renderer.domElement);

/* Licht */
scene.add(new THREE.AmbientLight(0xffffff, 0.6));
const sun = new THREE.DirectionalLight(0xffffff, 1);
sun.position.set(50,100,50);
scene.add(sun);

/* Materialien */
const matGround = new THREE.MeshStandardMaterial({color:0x7fa86c});
const matWall   = new THREE.MeshStandardMaterial({color:0xc7a17a});
const matRoof   = new THREE.MeshStandardMaterial({color:0x8b3e2f});
const matGlass  = new THREE.MeshStandardMaterial({color:0x99ccff, transparent:true, opacity:0.6});
const matWood   = new THREE.MeshStandardMaterial({color:0x4a2e1b});

/* Grundstück 800 m² (40 x 20) */
const ground = new THREE.Mesh(new THREE.PlaneGeometry(40,20), matGround);
ground.rotation.x = -Math.PI/2;
scene.add(ground);

/* Ziegelwand-Funktion */
function wallBlocks(x0,z0,w,d,h) {
    const g = new THREE.Group();
    const size = 0.4;
    const gap = 0.03;

    for(let x=0;x<w;x+=size+gap){
        for(let y=0;y<h;y+=size+gap){
            for(let z=0;z<d;z+=size+gap){
                const b = new THREE.Mesh(
                    new THREE.BoxGeometry(size,size,size),
                    matWall
                );
                b.position.set(
                    x0 + x + size/2,
                    y + size/2,
                    z0 + z + size/2
                );
                g.add(b);
            }
        }
    }
    return g;
}

/* Haus (12x12 m, 145 m²) */
const H = 3;
scene.add(
    wallBlocks(-6,-6,12,0.4,H),
    wallBlocks(-6,5.6,12,0.4,H),
    wallBlocks(-6,-6,0.4,12,H),
    wallBlocks(5.6,-6,0.4,12,H)
);

/* Fenster */
function windowBox(x,y,z,rx=0){
    const w = new THREE.Mesh(
        new THREE.BoxGeometry(2,1.6,0.2),
        matGlass
    );
    w.position.set(x,y,z);
    w.rotation.y = rx;
    scene.add(w);
}
windowBox(-3,1.4,6.1);
windowBox(3,1.4,6.1);
windowBox(-6.1,1.4,0,Math.PI/2);

/* Tür */
const door = new THREE.Mesh(new THREE.BoxGeometry(1.8,2.3,0.2), matWood);
door.position.set(0,1.15,6.1);
scene.add(door);

/* WALMDACH – 4 geneigte Flächen */
function roofPlane(w,d,rotX,rotZ,y){
    const p = new THREE.Mesh(
        new THREE.PlaneGeometry(w,d),
        matRoof
    );
    p.rotation.set(rotX,0,rotZ);
    p.position.y = y;
    scene.add(p);
}
roofPlane(12,4,-Math.PI/6,0,3.4);
roofPlane(12,4, Math.PI/6,0,3.4);
roofPlane(12,4,0, Math.PI/6,3.4);
roofPlane(12,4,0,-Math.PI/6,3.4);

/* Terrasse */
const terrace = new THREE.Mesh(
    new THREE.BoxGeometry(6,0.15,3),
    new THREE.MeshStandardMaterial({color:0xd2b48c})
);
terrace.position.set(0,0.075,8);
scene.add(terrace);

/* Bäume – sicher außerhalb */
function tree(x,z){
    const t = new THREE.Mesh(
        new THREE.CylinderGeometry(0.25,0.25,1.5),
        new THREE.MeshStandardMaterial({color:0x5a3b1e})
    );
    t.position.set(x,0.75,z);
    scene.add(t);

    const c = new THREE.Mesh(
        new THREE.SphereGeometry(1),
        new THREE.MeshStandardMaterial({color:0x2f7d32})
    );
    c.position.set(x,2.2,z);
    scene.add(c);
}
tree(-15,-7);
tree(15,-7);
tree(-15,7);
tree(15,7);

/* Kamera-Rotation */
let a=0;
function animate(){
    requestAnimationFrame(animate);
    a+=0.002;
    camera.position.x = 30*Math.cos(a);
    camera.position.z = 30*Math.sin(a);
    camera.lookAt(0,1.5,0);
    renderer.render(scene,camera);
}
animate();

window.addEventListener("resize",()=>{
    camera.aspect = innerWidth/innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(innerWidth,innerHeight);
});
</script>

</body>
</html>
