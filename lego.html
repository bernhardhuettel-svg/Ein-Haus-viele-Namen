<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>3D Bungalow – korrektes Walmdach</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { margin:0; background:#eef2f3; }
#container { width:100vw; height:100vh; }
</style>
</head>
<body>

<div id="container"></div>

<script type="module">
import * as THREE from "https://cdn.jsdelivr.net/npm/three@0.158/build/three.module.js";

/* ===================== BASIS ===================== */
const container = document.getElementById("container");
const scene = new THREE.Scene();
scene.background = new THREE.Color(0xcce6ff);

/* Hausparameter – ZENTRAL */
const houseWidth  = 12;
const houseDepth  = 12;
const houseHeight = 6;
const roofHeight  = 2.5;

/* Kamera */
const camera = new THREE.PerspectiveCamera(60, innerWidth/innerHeight, 0.1, 500);
camera.position.set(28, 18, 28);

/* Renderer */
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth, innerHeight);
renderer.setPixelRatio(devicePixelRatio);
container.appendChild(renderer.domElement);

/* Licht */
scene.add(new THREE.AmbientLight(0xffffff, 0.6));
const sun = new THREE.DirectionalLight(0xffffff, 1);
sun.position.set(50,80,40);
scene.add(sun);

/* ===================== MATERIALIEN ===================== */
const matGround = new THREE.MeshStandardMaterial({color:0x7fa86c});
const matWall   = new THREE.MeshStandardMaterial({color:0xc7a17a});
const matRoof   = new THREE.MeshStandardMaterial({color:0x8b3e2f});
const matGlass  = new THREE.MeshStandardMaterial({
    color:0x99ccff,
    transparent:true,
    opacity:0.6
});
const matWood   = new THREE.MeshStandardMaterial({color:0x4a2e1b});

/* ===================== GRUNDSTÜCK ===================== */
const ground = new THREE.Mesh(
    new THREE.PlaneGeometry(40,20),
    matGround
);
ground.rotation.x = -Math.PI/2;
scene.add(ground);

/* ===================== HAUSKÖRPER ===================== */
const house = new THREE.Mesh(
    new THREE.BoxGeometry(houseWidth, houseHeight, houseDepth),
    matWall
);
house.position.y = houseHeight / 2;
scene.add(house);

/* ===================== FENSTER ===================== */
function windowPlane(x,y,z,w,h,rotY=0){
    const geo = new THREE.PlaneGeometry(w,h);
    const win = new THREE.Mesh(geo, matGlass);
    win.position.set(x,y,z);
    win.rotation.y = rotY;
    scene.add(win);
}

/* Front */
windowPlane(-2, 2.2, houseDepth/2 + 0.01, 2.4, 1.4);
windowPlane( 2, 2.2, houseDepth/2 + 0.01, 2.4, 1.4);

/* Seite */
windowPlane(-houseWidth/2 - 0.01, 2.2, 0, 2.4, 1.4, Math.PI/2);

/* ===================== TÜR ===================== */
const door = new THREE.Mesh(
    new THREE.PlaneGeometry(1.6, 2.2),
    matWood
);
door.position.set(0,1.1,houseDepth/2 + 0.02);
scene.add(door);

/* ===================== WALMDACH ===================== */
function roofPlane(w,d,rotX,rotZ,x,z){
    const geo = new THREE.PlaneGeometry(w,d);
    const roof = new THREE.Mesh(geo, matRoof);
    roof.rotation.x = rotX;
    roof.rotation.z = rotZ;
    roof.position.set(x, houseHeight + roofHeight/2, z);
    scene.add(roof);
}

/* vorne / hinten */
roofPlane(
    houseWidth,
    houseDepth/2,
    -Math.PI/4,
    0,
    0,
    houseDepth/4
);

roofPlane(
    houseWidth,
    houseDepth/2,
    Math.PI/4,
    0,
    0,
    -houseDepth/4
);

/* links / rechts */
roofPlane(
    houseDepth,
    houseWidth/2,
    0,
    Math.PI/4,
    -houseWidth/4,
    0
);

roofPlane(
    houseDepth,
    houseWidth/2,
    0,
    -Math.PI/4,
    houseWidth/4,
    0
);

/* ===================== TERRASSE ===================== */
const terrace = new THREE.Mesh(
    new THREE.BoxGeometry(6,0.15,3),
    new THREE.MeshStandardMaterial({color:0xd2b48c})
);
terrace.position.set(0,0.075,houseDepth/2 + 1.8);
scene.add(terrace);

/* ===================== BÄUME ===================== */
function tree(x,z){
    const trunk = new THREE.Mesh(
        new THREE.CylinderGeometry(0.25,0.25,1.5),
        new THREE.MeshStandardMaterial({color:0x5a3b1e})
    );
    trunk.position.set(x,0.75,z);
    scene.add(trunk);

    const crown = new THREE.Mesh(
        new THREE.SphereGeometry(1.1),
        new THREE.MeshStandardMaterial({color:0x2f7d32})
    );
    crown.position.set(x,2.3,z);
    scene.add(crown);
}
tree(-14,-7);
tree(14,-7);
tree(-14,7);
tree(14,7);

/* ===================== ANIMATION ===================== */
let a = 0;
function animate(){
    requestAnimationFrame(animate);
    a += 0.002;
    camera.position.x = 28 * Math.cos(a);
    camera.position.z = 28 * Math.sin(a);
    camera.lookAt(0,2.5,0);
    renderer.render(scene,camera);
}
animate();

/* Resize */
addEventListener("resize",()=>{
    camera.aspect = innerWidth/innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(innerWidth,innerHeight);
});
</script>

</body>
</html>
