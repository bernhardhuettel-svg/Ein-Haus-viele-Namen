<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Lego-Haus + Community-Bau – Ela & Bernhard</title>
    <style>
        body { margin: 0; font-family: system-ui, sans-serif; background: #f9f9f9; color: #222; text-align: center; }
        header { padding: 30px 20px; background: #fff; border-bottom: 1px solid #ddd; }
        #container { width: 100%; height: 70vh; min-height: 500px; border: 2px solid #aaa; background: #e0f0e0; margin: 20px 0; }
        button { padding: 14px 32px; font-size: 1.1em; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer; margin: 20px; }
        button:hover { background: #218838; }
        .info { max-width: 800px; margin: 0 auto 40px; padding: 0 20px; line-height: 1.6; }
        a.back { display: inline-block; margin: 30px 0; padding: 10px 24px; background: #0066cc; color: white; text-decoration: none; border-radius: 6px; }
        a.back:hover { background: #0055aa; }
    </style>
   <script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
</head>
<body>

<header>
    <h1>3D Lego-Projekt: Fertiges Haus + Community-Bau</h1>
    <p>Links: Das fertige Haus (Bungalow).<br>Rechts: Der Community-Bereich, der von Spendern von Grund auf gebaut wird (aktuell Demo mit ein paar Steinen).</p>
</header>

<div id="container"></div>

<div class="info">
    <button onclick="init3D()">Szene laden (Haus + Community-Bauplatz)</button>

    <p>Der Community-Bereich startet leer/klein und wächst mit jedem 1-€-Stein.<br>
    Nächste Schritte: Mehr Steine dynamisch, Namen einblenden, Fortschritts-Text?</p>

    <a href="index.html" class="back">← Zurück zur Hauptseite</a>
</div>

<script>
    let scene, camera, renderer;

    function init3D() {
        const container = document.getElementById('container');

        scene = new THREE.Scene();
        scene.background = new THREE.Color(0xe0f0ff);

        camera = new THREE.PerspectiveCamera(60, container.clientWidth / container.clientHeight, 0.1, 2000);
        camera.position.set(0, 50, 100);  // Etwas weiter zurück für beide Objekte
        camera.lookAt(0, 0, 0);

        renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(container.clientWidth, container.clientHeight);
        renderer.setClearColor(0x88cc88, 1);
        renderer.setPixelRatio(window.devicePixelRatio);
        container.appendChild(renderer.domElement);

        // Licht
        scene.add(new THREE.AmbientLight(0xffffff, 1.0));
        const dirLight = new THREE.DirectionalLight(0xffffff, 1.2);
        dirLight.position.set(40, 80, 60);
        scene.add(dirLight);

// Gemeinsame Grundfläche
        const plateSize = 100;
        const groundGeo = new THREE.PlaneGeometry(plateSize, plateSize);
        const groundMat = new THREE.MeshStandardMaterial({ color: 0x4CAF50 });
        const ground = new THREE.Mesh(groundGeo, groundMat);
        ground.rotation.x = -Math.PI / 2;
        ground.position.y = -0.1;
        scene.add(ground);
        const grid = new THREE.GridHelper(plateSize, 80, 0x444444, 0xaaaaaa);
        grid.position.y = 0.01;
        scene.add(grid);
        // --- Community-Bau Bungalow (zentriert) – von Grund auf ---
        const communityX = 0; // Zentriert
        const houseWidth = 14;
        const houseDepth = 10;
        const wallHeight = 4;
        const brickSize = 1.2;
        const wallMat = new THREE.MeshStandardMaterial({ color: 0xffd700 }); // gelb
        const roofMat = new THREE.MeshStandardMaterial({ color: 0xb03030 }); // rot
        const doorMat = new THREE.MeshStandardMaterial({ color: 0x8B4513 }); // braun für Tür
        const windowMat = new THREE.MeshStandardMaterial({ color: 0xadd8e6, transparent: true, opacity: 0.5 }); // hellblau transparent für Fenster
        const poolMat = new THREE.MeshStandardMaterial({ color: 0x00bfff }); // blau für Pool
        // Basis-Platte für Community-Bereich
        const base = new THREE.Mesh(
            new THREE.BoxGeometry(16, 0.4, 16), // Etwas größer für Pool
            new THREE.MeshStandardMaterial({ color: 0x666666 })
        );
        base.position.set(communityX, 0.2, 0);
        scene.add(base);
        // Fundament: Demo-Steine als Basis (Stapel von Grund auf)
        for (let level = 0; level < 2; level++) { // Niedriges Fundament als Start
            for (let x = -houseWidth/2 + brickSize; x < houseWidth/2; x += brickSize * 2) {
                for (let z = -houseDepth/2 + brickSize; z < houseDepth/2; z += brickSize * 2) {
                    if (Math.random() > 0.1) { // Dicht, aber etwas variabel
                        const brick = new THREE.Mesh(
                            new THREE.BoxGeometry(brickSize, brickSize, brickSize),
                            wallMat
                        );
                        brick.position.set(
                            communityX + x,
                            brickSize * level + brickSize/2 + 0.4,
                            z
                        );
                        scene.add(brick);
                    }
                }
            }
        }
        // Wände auf dem Fundament
        const wallY = wallHeight / 2 + 2 * brickSize; // Über dem Fundament
        let wallGeo = new THREE.BoxGeometry(houseWidth, wallHeight, 0.4);
        let wall = new THREE.Mesh(wallGeo, wallMat);
        wall.position.set(communityX, wallY, -houseDepth/2);
        scene.add(wall);
        wall = wall.clone();
        wall.position.z = houseDepth/2;
        scene.add(wall);
        wallGeo = new THREE.BoxGeometry(0.4, wallHeight, houseDepth);
        wall = new THREE.Mesh(wallGeo, wallMat);
        wall.position.set(communityX - houseWidth/2, wallY, 0);
        scene.add(wall);
        wall = wall.clone();
        wall.position.x = communityX + houseWidth/2;
        scene.add(wall);
        // Dach
        const roof = new THREE.Mesh(
            new THREE.BoxGeometry(houseWidth + 1, 0.6, houseDepth + 1),
            roofMat
        );
        roof.position.set(communityX, wallY + wallHeight / 2 + 0.3, 0);
        scene.add(roof);
        // Fenster (z.B. 2 auf Vorder- und Rückseite)
        const windowGeo = new THREE.BoxGeometry(2, 2, 0.2);
        const window = new THREE.Mesh(windowGeo, windowMat);
        window.position.set(communityX - 4, wallY, -houseDepth/2 - 0.1); // Vorne links
        scene.add(window);
        window.position.set(communityX + 4, wallY, -houseDepth/2 - 0.1); // Vorne rechts
        scene.add(window.clone());
        window.position.set(communityX - 4, wallY, houseDepth/2 + 0.1); // Hinten links
        scene.add(window.clone());
        window.position.set(communityX + 4, wallY, houseDepth/2 + 0.1); // Hinten rechts
        scene.add(window.clone());
        // Tür (vorne mitte)
        const doorGeo = new THREE.BoxGeometry(2.5, 3, 0.2);
        const door = new THREE.Mesh(doorGeo, doorMat);
        door.position.set(communityX, wallY - 0.5, -houseDepth/2 - 0.1);
        scene.add(door);
        // Pool (rechts neben dem Haus)
        const pool = new THREE.Mesh(
            new THREE.BoxGeometry(6, 0.5, 8),
            poolMat
        );
        pool.position.set(communityX + houseWidth/2 + 5, 0.25 + 2 * brickSize, 0); // Neben dem Haus, auf Fundament-Höhe
        scene.add(pool);
        console.log('Szene mit Community-Bau Bungalow geladen.');
        function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }
        animate();
        window.addEventListener('resize', () => {
            camera.aspect = container.clientWidth / container.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(container.clientWidth, container.clientHeight);
        });




        
        // --- Community-Bauplatz (rechts) – von Grund auf ---
        const communityX = 25;  // Rechts positioniert
        const brickSize = 1.2;
        const brickMat = new THREE.MeshStandardMaterial({ color: 0xffd700 }); // gelb wie Haus

        // Basis-Platte für Community-Bereich
        const base = new THREE.Mesh(
            new THREE.BoxGeometry(12, 0.4, 12),
            new THREE.MeshStandardMaterial({ color: 0x666666 })
        );
        base.position.set(communityX, 0.2, 0);
        scene.add(base);

        // Demo-Steine: Stapel von Grund auf (je höher = mehr Spenden simuliert)
        for (let level = 0; level < 8; level++) {  // z. B. 8 Steine hoch als Demo
            for (let x = -2; x <= 2; x += 2) {
                for (let z = -2; z <= 2; z += 2) {
                    if (Math.random() > 0.3) {  // etwas unregelmäßig für "echten Bau"-Look
                        const brick = new THREE.Mesh(
                            new THREE.BoxGeometry(brickSize, brickSize, brickSize),
                            brickMat
                        );
                        brick.position.set(
                            communityX + x,
                            brickSize * level + brickSize/2 + 0.4,
                            z
                        );
                        scene.add(brick);
                    }
                }
            }
        }

        console.log('Szene mit Haus + Community-Bau geladen.');

        function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }
        animate();

        window.addEventListener('resize', () => {
            camera.aspect = container.clientWidth / container.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(container.clientWidth, container.clientHeight);
        });
    }
</script>

</body>
</html>
