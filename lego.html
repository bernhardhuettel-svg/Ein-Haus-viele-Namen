<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>3D Bungalow – Walmdach & Fenster</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
    margin: 0;
    background: #f0f0f0;
    font-family: system-ui, sans-serif;
}
#container {
    width: 100%;
    height: 100vh;
}
</style>
</head>

<body>
<div id="container"></div>

<script type="module">
import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.158/build/three.module.js';

/* ======================
   BASIC SETUP
====================== */
const container = document.getElementById("container");

const scene = new THREE.Scene();
scene.background = new THREE.Color(0xcceeff);

const camera = new THREE.PerspectiveCamera(
    60,
    container.clientWidth / container.clientHeight,
    0.1,
    1000
);
camera.position.set(28, 18, 28);

const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(container.clientWidth, container.clientHeight);
renderer.setPixelRatio(window.devicePixelRatio);
container.appendChild(renderer.domElement);

/* ======================
   LIGHT
====================== */
scene.add(new THREE.AmbientLight(0xffffff, 0.6));
const sun = new THREE.DirectionalLight(0xffffff, 1);
sun.position.set(50, 80, 40);
scene.add(sun);

/* ======================
   MATERIALS
====================== */
const groundMat = new THREE.MeshStandardMaterial({ color: 0x88aa66 });
const wallMat   = new THREE.MeshStandardMaterial({ color: 0xc8a27c });
const roofMat   = new THREE.MeshStandardMaterial({ color: 0x7a3e2d });
const glassMat  = new THREE.MeshStandardMaterial({
    color: 0x88ccff,
    transparent: true,
    opacity: 0.45
});
const frameMat  = new THREE.MeshStandardMaterial({ color: 0x444444 });
const pathMat   = new THREE.MeshStandardMaterial({ color: 0x999999 });

/* ======================
   GROUND (800 m²)
====================== */
const ground = new THREE.Mesh(
    new THREE.PlaneGeometry(20, 40),
    groundMat
);
ground.rotation.x = -Math.PI / 2;
scene.add(ground);

/* ======================
   HOUSE DIMENSIONS
====================== */
const houseW = 12;
const houseD = 12;
const houseH = 3;

/* ======================
   WALLS (Ziegelraster)
====================== */
function createWall(x, y, z, w, h, d) {
    const g = new THREE.Group();
    const size = 0.48;
    const gap = 0.02;
    const step = size + gap;

    for (let i = 0; i < w; i += step) {
        for (let j = 0; j < h; j += step) {
            for (let k = 0; k < d; k += step) {
                const brick = new THREE.Mesh(
                    new THREE.BoxGeometry(size, size, size),
                    wallMat
                );
                brick.position.set(
                    x + i + size / 2,
                    y + j + size / 2,
                    z + k + size / 2
                );
                g.add(brick);
            }
        }
    }
    scene.add(g);
}

/* Walls */
createWall(-houseW/2, 0,  houseD/2-0.15, houseW, houseH, 0.3);
createWall(-houseW/2, 0, -houseD/2,      houseW, houseH, 0.3);
createWall(-houseW/2, 0, -houseD/2,      0.3, houseH, houseD);
createWall( houseW/2-0.3,0,-houseD/2,    0.3, houseH, houseD);

/* ======================
   WINDOWS & DOORS
====================== */
function addWindow(x, y, z, w=2, h=1.5) {
    const frame = new THREE.Mesh(
        new THREE.BoxGeometry(w+0.1, h+0.1, 0.15),
        frameMat
    );
    frame.position.set(x, y, z-0.01);
    scene.add(frame);

    const glass = new THREE.Mesh(
        new THREE.BoxGeometry(w, h, 0.1),
        glassMat
    );
    glass.position.set(x, y, z);
    scene.add(glass);
}

/* Front */
addWindow(-3, 1.6, houseD/2+0.02);
addWindow( 3, 1.6, houseD/2+0.02);

/* Sides */
addWindow(-houseW/2-0.02, 1.6, -2);
addWindow( houseW/2+0.02, 1.6,  2);

/* Back */
addWindow(0, 1.6, -houseD/2-0.02, 3, 2);

/* ======================
   WALMDACH
====================== */
function roofPlane(w, h, rotX, rotY, x, y, z) {
    const roof = new THREE.Mesh(
        new THREE.PlaneGeometry(w, h),
        roofMat
    );
    roof.rotation.set(rotX, rotY, 0);
    roof.position.set(x, y, z);
    scene.add(roof);
}

const roofH = 2.2;
const pitch = Math.PI / 6;

/* Front / Back */
roofPlane(houseW+2, roofH, pitch, 0, 0, houseH+1,  houseD/2+0.5);
roofPlane(houseW+2, roofH,-pitch, 0, 0, houseH+1, -houseD/2-0.5);

/* Left / Right */
roofPlane(houseD+2, roofH, pitch, Math.PI/2, -houseW/2-0.5, houseH+1, 0);
roofPlane(houseD+2, roofH,-pitch, Math.PI/2,  houseW/2+0.5, houseH+1, 0);

/* ======================
   PATH
====================== */
const path = new THREE.Mesh(
    new THREE.BoxGeometry(2, 0.05, 5),
    pathMat
);
path.position.set(0, 0.03, houseD/2 + 3);
scene.add(path);

/* ======================
   CAMERA ROTATION
====================== */
let angle = 0;
function animate() {
    requestAnimationFrame(animate);
    angle += 0.002;
    camera.position.x = 28 * Math.cos(angle);
    camera.position.z = 28 * Math.sin(angle);
    camera.lookAt(0, 1.5, 0);
    renderer.render(scene, camera);
}
animate();

/* Resize */
window.addEventListener("resize", () => {
    camera.aspect = container.clientWidth / container.clientHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(container.clientWidth, container.clientHeight);
});
</script>
</body>
</html>
